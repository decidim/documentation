= Survey

The Survey component allows people to answer questionnaires. This is useful when an organization wants to receive private
feedback, although it is possible to publish the answers manually as well. It allows defining a set of questions with multiple kinds of answers.

From this starting point, there could be other configurations, such as:

* if you want to limit the answering to a fixed duration
* the answer types expected for the questions, like short - one line, long - multiple lines, single or multiple options,
sorting through a list, etc.
* if there's an answer validation, like the maximum number of characters in an answer
* if there's a maximum number of options to select in multiple options questions

Some examples of this component in use include:

pass:[<!-- vale Vale.Spelling = NO -->]

// The non-English text here throws a spelling error, so turning off Vale for this section.

* https://consultation.quebec.ca/processes/donneesquebec/f/82/[Data Quebec: participate in its improvement(Données Québec : participez à son amélioration!) in Québec consultations]
* https://meta.decidim.org/conferences/decidimfest2020/f/1403/?locale=en[DecidimFest2020 Assessment Survey]

pass:[<!-- vale Vale.Spelling = YES -->]

image:components/surveys/example01.png[Example of a survey]

To configure the Survey component:

. Sign in as an administrator
. Go to the administrator panel
. In the main sidebar, click in the button for the space that you want to configure the component for.
For instance, it could be 'Processes', 'Assemblies' or 'Conferences'.
. Go to components
. Click on 'Add component' button
. Click on 'Survey'
. Fill the xref:_add_component[Add component] form

Once a survey is already answered by some users it is not possible to modify its questions, as that would affect the integrity
of the answers. If you need to modify the questions, then you should create a new survey and un-publish the original one.

== Add component

image:components/surveys/component.png[Add component form]

.Add component: Survey form
|===
|Field |Type |Description

|Name
|Required
|What is the title of this component. For instance, 'Surveys'

|Order position
|Optional
|Which order it has in relation to the other surveys. Having a lower number means a higher priority.
For instance, if you have two surveys, 'Survey A' with weight '10' and 'Survey B' with weight '0', then 'Survey B' displays first when ordering.

|===

.Add component: Survey form - Global settings
|===
|Field |Type |Description

|Scopes enabled
|Optional
|Select if you want to have Scopes filtering in this component.

|Scope
|Optional
|Which xref:admin:scopes.adoc[Scope] does this component belongs to.

|Answers accepted from
|Optional
|Start date when you want to receive answers. Leave blank for no specific date. Expected format: dd/mm/yyyy hh:ii

|Answers accepted until
|End date when you want to stop receiving answers. Leave blank for no specific date. Expected format: dd/mm/yyyy hh:ii

|Announcement
|Optional
|A general announcement visible on the general surveys landing page.

|Delete answers when publishing the survey
|Optional
|Select if you want to delete answers when the survey is published. Useful for when you want to test the survey before publishing it.

|===

In the cases where the space using the component has xref:admin:spaces/processes/phases.adoc[Phases], for instance, in
xref:admin:spaces/processes.adoc[Participatory Processes], then you can also define different behaviors per Step.

.Add component: Surveys form - Step settings
|===
|Field |Type |Description

|Allow answers
|Optional
|Select if you want to receive answers in this survey.

|Allow unregistered users to answer the survey
|Optional
|If selected, login is not required to answer the survey. This may lead to poor or unreliable data and is more vulnerable to automated attacks. Use with caution. Be aware that this option only allows one answer per browser session,
but participants could use incognito mode and make multiple answers with the same device.

|Announcement
|Optional
|A general announcement visible on the general survey landing page.

|===

== Permissions

An administrator can choose which kind of xref:customize:authorizations.adoc[Authorizations] a participant need to have to take
certain actions in the surveys:

* Answer

== New survey form

When you create a new survey, fill in the form with these fields:

image:components/surveys/edit_form.png[Edit survey form]

NOTE: Do you have repetitive surveys? For instance the same feedback form for every process? You can have a survey that
gets copied and becomes a blueprint, so you do not have to manually configure the same survey every time. Learn more
about xref:_templates[Templates].

.New survey form
|===
|Field |Type |Description

|Title
|Required
|What is the title of this survey. For instance, 'Feedback'

|Description
|Optional
|What is the description of this survey.

|Terms of service
|Required
|Legal conditions that the participants must abide by to answer the survey.

|===

In the bottom of this form there's a button that allows you to 'Add question'.

image:components/surveys/add_question_button.png[]

You can add multiple questions per survey, and reorder or delete them. It is possible to also add separators between questions.

Every question must have a statement and a type as a minimum.

image:components/surveys/question_form.png[]

.Add question form
|===
|Field |Type |Description

|Statement
|Required
|The question itself. For instance, 'What is your age category?'

|Description
|Optional
|Explanation of the question.

|Mandatory
|Optional
|Select if this is a mandatory question.

|Character limit
|Optional
|The maximum number of characters available in an answer to this question. Leave at 0 if no limit. Compatible with Short and Long answer question types.

|Type
|Required
|One of the following: Short answer, Long answer, Single option, Multiple option, Sorting, Files, Matrix (Single option)
or Matrix (Multiple option). See xref:_question_types[Question types] for more information.

|===

Depending in the question type, it is possible to add validations to the answers, like if the question is mandatory - participants
would need to provide an answer to submit the form - or if the answer should have a certain number of characters as a maximum in
short and long answers.

image:components/surveys/question_form_limits_backend.png[]

image:components/surveys/question_form_limits_frontend.png[]

== Question types

A survey can have multiple questions with different types, such as:

- Short answer
- Long answer
- Single option
- Multiple option
- Sorting
- Files
- Matrix (Single option)
- Matrix (Multiple option)

.Question types - click to view image in detail
|===
|Type|Frontend |Backend |Description

|Short answer
|image:components/surveys/type_short_answer_frontend.png[Short answer type - frontend,link=../_images/components/surveys/type_short_answer_frontend.png]
|image:components/surveys/type_short_answer_backend.png[Short answer type - backend,link=../_images/components/surveys/type_short_answer_backend.png]
|Compatible with 'Character limit' validation

|Long answer
|image:components/surveys/type_long_answer_frontend.png[Long answer type - frontend,link=../_images/components/surveys/type_long_answer_frontend.png]
|image:components/surveys/type_long_answer_backend.png[Long answer type - backend,link=../_images/components/surveys/type_long_answer_backend.png]
|Compatible with 'Character limit' validation

|Single option
|image:components/surveys/type_single_option_frontend.png[Single option type - frontend,link=../_images/components/surveys/type_single_option_frontend.png]
|image:components/surveys/type_single_option_backend.png[Single option type - backend,link=../_images/components/surveys/type_single_option_backend.png]
|Participants have to choose a single option, with radio buttons. Must always have at least 2 options. It is possible to define a 'Free text' option, so participants can submit their own answer.

|Multiple option
|image:components/surveys/type_multiple_option_frontend.png[Multiple option type - frontend,link=../_images/components/surveys/type_multiple_option_frontend.png]
|image:components/surveys/type_multiple_option_backend.png[Multiple option type - backend,link=../_images/components/surveys/type_multiple_option_backend.png]
|Participants have to choose multiple options, with checkboxes. Must always have at least 2 options. It is possible to add a validation, with the maximum number of choices. It is possible to define a 'Free text' option, so participants can submit their own answer.

|Sorting
|image:components/surveys/type_sorting_frontend.png[Sorting type - frontend,link=../_images/components/surveys/type_sorting_frontend.png]
|image:components/surveys/type_sorting_backend.png[Sorting type - backend,link=../_images/components/surveys/type_sorting_backend.png]
|Must always have at least 2 options. Participants click in order of preference to sort.

|Files
|image:components/surveys/type_files_frontend.png[Files type - frontend,link=../_images/components/surveys/type_files_frontend.png]
|image:components/surveys/type_files_backend.png[Files type - backend,link=../_images/components/surveys/type_files_backend.png]
|Participants can upload files.

|Matrix (Single option)
|image:components/surveys/type_matrix_single_option_frontend.png[Matrix (Single option) type - frontend,link=../_images/components/surveys/type_matrix_single_option_frontend.png]
|image:components/surveys/type_matrix_single_option_backend.png[Matrix (Single option) type - backend,link=../_images/components/surveys/type_matrix_single_option_backend.png]
|Participants have to choose between rows and columns of single options, with radio buttons.

|Matrix (Multiple option)
|image:components/surveys/type_matrix_multiple_option_frontend.png[Matrix (Multiple option) type - frontend,link=../_images/components/surveys/type_matrix_multiple_option_frontend.png]
|image:components/surveys/type_matrix_multiple_option_backend.png[Matrix (Multiple option) type - backend,link=../_images/components/surveys/type_matrix_multiple_option_backend.png]
|Participants have to choose between rows and columns of multiple options, with checkboxes.

|===

== Templates

For cases where administrators need to define multiple surveys that are mostly the same but used in different contexts,
it is possible to define a template. When there is one defined for a survey, then it asks you to select the Template and create
the survey based on this one, or if there is no need to use a template, then it is possible to skip the template
selection.

image:components/surveys/edit_questionnaire.png[Choose template form]

== Export answers

It is possible to export the survey participant answers to different formats - CSV, JSON, XLSX (Excel) or PDF.

Note that the platform does not handle the answer processing nor presenting results or summaries to the users, you need to do that externally.
